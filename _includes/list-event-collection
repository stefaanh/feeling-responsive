{% comment %}
*
*   This include lets you loop through an event-collection to list
*   all entries in that collection.
*
*   The event should have a 'timestamp' in the frontmatter for the day (and time) of the event
*
*   The collection can be filtered using the timespan parameter.
*   * timespan='past'
*   * timespan='future'
*   * any other value or nil will show all events.
*
*   If you set »published: false« in front matter of a collection page
*   the page gets filtered out via unless
*
*   Example: {% include list-event-collection events='wordpress' timespan='past' %}
*
{% endcomment %}
{%- assign middernacht = "now" | date: '%F' -%}
{% if include.timespan != 'future' %}
  {% assign events = site.[include.events]  | where_exp: "item", "item.timestamp < middernacht" | sort: "timestamp" | reverse %}
{% else %}
  {% assign events = site.[include.events]  | where_exp: "item", "item.timestamp >= middernacht" | sort: "timestamp" %}
{% endif %}
<ul class="side-nav">
  {% for event in events %}
    <li>    
       <a href="{{ site.url }}{{ event.url }}">
        {{ event.title }}</a>{{ event.teaser | markdownify }}
    </li>
  {% endfor %}
</ul>
